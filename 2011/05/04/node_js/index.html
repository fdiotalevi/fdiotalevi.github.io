<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>diotalevi.com</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/main.css">
        
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
        <!-- Optional theme -->
        <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css">
        <!-- Latest compiled and minified JavaScript -->
        <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>        
    </head>
    <body>
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container site-wide">
          <div class="navbar-justify navbar-collapse">
            <ul class="nav navbar-nav">
              <li><a href="/">Home</a></li>
                <li><a href="/pages/about/">About</a></li>
                              <li><a href="/pages/archive/">Archive</a></li>
                              <li><a href="/pages/cv/">Curriculum</a></li>
                            
                <li><a href="/rss.xml">Feed</a></li>
              </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>

      <div class="container">
        <div class="mainbody">
                
        title: Trying node.js 
author: Filippo Diotalevi
date: 2011/05/04
<article class="hentry">

   <h2 class="entry-title">Trying node.js</h2>
   
   <div class="info">Published by <span class="author vcard"><span class="fn">Filippo Diotalevi</span></span>
      on <span class="published" datetime="2011-05-04 12:00:00">4th May 2011</span> 
      (last update <span class="updated" datetime="2011-05-04 12:00:00">4th May 2011</span>)
   </div>

	<p>
	<em>
	After a few months of Rails development, I start to really enjoy working with dynamic languages. Coming from a Java background, it takes some time to get used to work without a proper IDE with code completion and good refactoring tools; however, after a while the development experience becomes more natural, especially if you pair a dynamic language with a schema free database like <a href="http://mongodb.org">MongoDB</a>.
	</em>
	</p>
	<p>
	I was really curious to try some other (dynamic) way to develop web applications, so I decided to build a website to sell my old furniture, and I picked <a href='http://nodejs.org'>node.js</a> because... well, a lot of people is talking about it. I understand that's not a sensible reason to choose a technology but hey, I just wanted to sell a few things. <a href='http://garagesale.diotalevi.com'>Have a look at the result</a>, if you are interested (I still have a good wardrobe for sale, anyway).
	</p>
	<p>
	At the end of the development, these are my notes/impressions.
	</p>
	<p>
	<b>Overall development experience</b><br/>
	Developing the website has taken me about 12 hours. I estimate I spent roughly 30% of the time to google for information, and 20% to integrate the design. So development is reasonably quick.<br/>
	Programming a web application in a event-driven fashion (the node.js way) feels a bit weird, but it's not a problem for simple webapps. I can imagine that if you need to write some complicate business logic that might be quite challenging though.
	</p>
	<p>
	<b>Node.js and Express</b><br/>
	<!--more-->
	Node.js is a low-level framework, so if you want to develop a web application you better use <a href="http://expressjs.com">Express</a>. Express is a minimal web framework, similar to <a href="http://www.sinatrarb.com/">Sinatra</a>. It's well documented in the website, and very quick to get started.
	</p>
	<p>
	<b>Jade</b><br/>
	Since the <a href="http://expressjs.com/guide.html#template-engines">Express documentation</a> states that <a href="http://jade-lang.com/">Jade</a> is Haml successor, I figured that was the right choice. Wrong. For two reasons.<br/>
	<em>First</em>, jade is basically undocumented. The <a href="https://github.com/visionmedia/jade">Github page</a> gives you some hints, but really not enough to write even a simple web application. Pro tip: the source code contains a <em>examples/</em> folder.<br/>
	<em>Second</em> reason: jade is very similar to Haml. Except that it is different. It feels similar, but some small details are different, so that (if you happen to work also with Haml like I'm doing) you keep making annoying errors.<br/>
	</p>
	<p>
	<b>MongoDB integration</b><br/>
	I used <a href="https://github.com/christkv/node-mongodb-native">node-mongodb-native </a>and
	<a href="https://github.com/guileen/node-mongoskin">mongoskin</a> to integrate the web application with MongoDB. Documentation here is still very minimal, and you have to figure out things via trial and error. But anyway, every MongoDB driver works basically in the same way.
	</p>
	<b>Deployment on Duostack</b><br/>
	One of the reason I chose the Node.js+MongoDB stack is to be able to deploy the application, for free, on <a href="http://duostack.com">Duostack</a>. Duostack is the Heroku for Node.js, with some nice additions like the availability of MySQL, MongoDB and Redis to store your data. And a very reasonable free plan that allows to install your application with a 128MB database.<br/>
	Duostack works exactly like Heroku; you push your code in production via <em>git</em>, and everything works. The application feels actually a bit slower than some of my applications deployed on Heroku, but I haven't really done any benchmark. It's free! so I can't complain.
	</p>
	<p>
	<br>
	<b>In summary</b><br/>
	Node.js and Express are enjoyable technologies to use, but really in their infancy. They're also in constant development, and incompatibilities are likely to be introduced in new versions. Their documentation is quite good, but the whole set of frameworks/technologies that you need to use to implement a full web application (templating, authentication, authorisation) is not. So expect to spend a lot of time to google for solutions, and to ask/answer questions in mailing lists and <a href='http://stackoverflow.com/questions/tagged/node.js'>stackoverflow</a>.<br/>
	Also, I'm not convinced the event-driven approach can cope well with websites with complex business logic; it would help to have some books or at least a best practice collection to refer in this case, but I couldn't find anything.<br/>
	On the other side, if you need to implement a network server, node.js is certainly worth having a good look.
	</p>
</div>

        </div>

      </div><!-- /.container -->
    </body>
</html>